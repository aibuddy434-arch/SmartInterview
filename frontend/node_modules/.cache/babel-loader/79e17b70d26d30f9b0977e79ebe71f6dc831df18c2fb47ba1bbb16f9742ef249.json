{"ast":null,"code":"/**\n * Utility functions for consistent error handling across the application\n */\n\n/**\n * Safely extracts error message from various error response formats\n * @param {Error} error - The error object from try/catch\n * @param {string} fallbackMessage - Default message if no error details found\n * @returns {string} - Safe error message to display to user\n */\n/**\n * Utility functions for consistent error handling across the application\n */\n\n// Extract error message safely\n\nexport const getErrorMessage = (error, fallbackMessage = 'An unexpected error occurred') => {\n  var _error$response, _error$response2, _error$response3, _error$response4, _error$response5;\n  if (!error) return fallbackMessage;\n\n  // Handle Axios error responses\n  if ((_error$response = error.response) !== null && _error$response !== void 0 && _error$response.data) {\n    const data = error.response.data;\n    if (data.detail) return data.detail;\n    if (data.error) return data.error;\n    if (data.errors && Array.isArray(data.errors)) {\n      return data.errors.join(', ');\n    }\n    if (data.message) return data.message;\n  }\n\n  // Handle network errors\n  if (error.code === 'NETWORK_ERROR' || error.message === 'Network Error') {\n    return 'Network connection failed. Please check your internet connection.';\n  }\n\n  // Handle timeout errors\n  if (error.code === 'ECONNABORTED') {\n    return 'Request timeout. Please try again.';\n  }\n\n  // Handle JWT/authentication errors\n  if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 401) {\n    return 'Session expired. Please log in again.';\n  }\n  if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 403) {\n    return 'Access denied. You do not have permission to perform this action.';\n  }\n  if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 404) {\n    return 'Resource not found. Please check the URL and try again.';\n  }\n  if (((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.status) >= 500) {\n    return 'Server error. Please try again later.';\n  }\n\n  // Handle other error types\n  if (error.message) return error.message;\n  if (error.error) return error.error;\n  return fallbackMessage;\n};\n\n// Validate required fields inside response\nexport const validateResponse = (response, requiredFields = [], fallbackMessage = 'Invalid response from server') => {\n  if (!response || typeof response !== 'object') {\n    return {\n      success: false,\n      data: null,\n      error: fallbackMessage\n    };\n  }\n  const isValid = requiredFields.every(field => {\n    const fieldPath = field.split('.');\n    let current = response;\n    for (const key of fieldPath) {\n      if (current && typeof current === 'object' && key in current) {\n        current = current[key];\n      } else {\n        return false;\n      }\n    }\n    return current !== null && current !== undefined;\n  });\n  if (isValid) {\n    return {\n      success: true,\n      data: response,\n      error: null\n    };\n  } else {\n    return {\n      success: false,\n      data: null,\n      error: fallbackMessage\n    };\n  }\n};\n\n// Handle raw responses safely\nexport const safeResponseHandler = (response, requiredFields = [], errorMessage = 'Invalid response from server') => {\n  const validationResult = validateResponse(response, requiredFields, errorMessage);\n  if (validationResult && validationResult.success) {\n    return validationResult;\n  } else {\n    console.error('Response validation failed:', response);\n    return validationResult || {\n      success: false,\n      data: null,\n      error: errorMessage\n    };\n  }\n};\n\n// API call wrapper without validation\nexport const safeApiCall = async (apiCall, fallbackMessage = 'API call failed') => {\n  try {\n    const response = await apiCall();\n\n    // Ensure response is defined\n    if (!response) {\n      console.error('No response received from API call');\n      return {\n        success: false,\n        data: null,\n        error: 'No response received from server'\n      };\n    }\n\n    // Handle standardized backend response structure\n    if (response.data) {\n      const {\n        success,\n        data,\n        message,\n        error\n      } = response.data;\n      if (success === true) {\n        return {\n          success: true,\n          data: data,\n          error: null\n        };\n      } else {\n        return {\n          success: false,\n          data: null,\n          error: error || message || fallbackMessage\n        };\n      }\n    }\n\n    // Fallback for non-standardized responses (assume success)\n    return {\n      success: true,\n      data: response,\n      error: null\n    };\n  } catch (error) {\n    const errorMessage = getErrorMessage(error, fallbackMessage);\n    console.error('API call failed:', error);\n    return {\n      success: false,\n      data: null,\n      error: errorMessage\n    };\n  }\n};\n\n// API call wrapper WITH validation\nexport const safeApiCallWithValidation = async (apiCall, requiredFields = [], fallbackMessage = 'Request failed') => {\n  try {\n    const response = await apiCall();\n\n    // Ensure response is defined\n    if (!response) {\n      console.error('No response received from API call');\n      return {\n        success: false,\n        data: null,\n        error: 'No response received from server'\n      };\n    }\n\n    // Handle standardized backend response structure\n    if (response.data) {\n      const {\n        success,\n        data,\n        message,\n        error\n      } = response.data;\n      if (success === true) {\n        // Validate required fields in the data\n        if (data && typeof data === 'object') {\n          const validationResult = validateResponse(data, requiredFields, fallbackMessage);\n          if (validationResult && validationResult.success) {\n            return {\n              success: true,\n              data: data,\n              error: null\n            };\n          } else {\n            return validationResult || {\n              success: false,\n              data: null,\n              error: fallbackMessage\n            };\n          }\n        } else {\n          return {\n            success: false,\n            data: null,\n            error: 'Invalid data structure received from server'\n          };\n        }\n      } else {\n        return {\n          success: false,\n          data: null,\n          error: error || message || fallbackMessage\n        };\n      }\n    }\n\n    // Fallback for non-standardized responses\n    const fallbackResult = safeResponseHandler(response, requiredFields, fallbackMessage);\n    return fallbackResult || {\n      success: false,\n      data: null,\n      error: fallbackMessage\n    };\n  } catch (error) {\n    const errorMessage = getErrorMessage(error, fallbackMessage);\n    console.error('API call failed:', error);\n    return {\n      success: false,\n      data: null,\n      error: errorMessage\n    };\n  }\n};\n\n// Enhanced API call wrapper with comprehensive error handling\nexport const robustApiCall = async (apiCall, options = {}) => {\n  const {\n    requiredFields = [],\n    fallbackMessage = 'Request failed',\n    showToast = true,\n    retryOn401 = true,\n    maxRetries = 1\n  } = options;\n  let retryCount = 0;\n  const attemptCall = async () => {\n    try {\n      const response = await apiCall();\n\n      // Handle HTTP errors\n      if (response && response.status >= 400) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      // Handle standardized backend response structure\n      if (response && response.data) {\n        const {\n          success,\n          data,\n          message,\n          error\n        } = response.data;\n        if (success === true) {\n          // Validate required fields if specified\n          if (requiredFields.length > 0) {\n            const validationResult = validateResponse(data, requiredFields, fallbackMessage);\n            if (validationResult && validationResult.success) {\n              return {\n                success: true,\n                data: data,\n                error: null\n              };\n            } else {\n              return validationResult || {\n                success: false,\n                data: null,\n                error: fallbackMessage\n              };\n            }\n          }\n          return {\n            success: true,\n            data: data,\n            error: null\n          };\n        } else {\n          return {\n            success: false,\n            data: null,\n            error: error || message || fallbackMessage\n          };\n        }\n      }\n\n      // Fallback for non-standardized responses\n      return {\n        success: true,\n        data: response,\n        error: null\n      };\n    } catch (error) {\n      var _error$response6;\n      // Handle 401 errors with retry logic\n      if (((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.status) === 401 && retryOn401 && retryCount < maxRetries) {\n        retryCount++;\n        console.log(`Retrying API call (attempt ${retryCount})...`);\n        // Wait a bit before retry\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        return attemptCall();\n      }\n      const errorMessage = getErrorMessage(error, fallbackMessage);\n      console.error('API call failed:', error);\n      return {\n        success: false,\n        data: null,\n        error: errorMessage\n      };\n    }\n  };\n  return attemptCall();\n};\n\n// Comprehensive error handler for all API calls\nexport const handleApiError = (error, fallbackMessage = 'An unexpected error occurred') => {\n  var _error$response7;\n  console.error('API Error Details:', error);\n\n  // Handle different error types\n  if (error !== null && error !== void 0 && (_error$response7 = error.response) !== null && _error$response7 !== void 0 && _error$response7.data) {\n    const data = error.response.data;\n    return data.detail || data.error || data.message || fallbackMessage;\n  }\n  if (error !== null && error !== void 0 && error.message) {\n    return error.message;\n  }\n  if ((error === null || error === void 0 ? void 0 : error.code) === 'NETWORK_ERROR' || (error === null || error === void 0 ? void 0 : error.message) === 'Network Error') {\n    return 'Network connection failed. Please check your internet connection.';\n  }\n  if ((error === null || error === void 0 ? void 0 : error.code) === 'ECONNABORTED') {\n    return 'Request timeout. Please try again.';\n  }\n  return fallbackMessage;\n};\n\n// Safe property access utility\nexport const safeGet = (obj, path, defaultValue = null) => {\n  if (!obj || typeof obj !== 'object') return defaultValue;\n  const keys = path.split('.');\n  let current = obj;\n  for (const key of keys) {\n    if (current && typeof current === 'object' && key in current) {\n      current = current[key];\n    } else {\n      return defaultValue;\n    }\n  }\n  return current !== undefined ? current : defaultValue;\n};\n\n// Enhanced API call with comprehensive error handling and retry logic\nexport const resilientApiCall = async (apiCall, options = {}) => {\n  const {\n    requiredFields = [],\n    fallbackMessage = 'Request failed',\n    maxRetries = 2,\n    retryDelay = 1000,\n    retryOn401 = true\n  } = options;\n  let lastError = null;\n  for (let attempt = 0; attempt <= maxRetries; attempt++) {\n    try {\n      const response = await apiCall();\n\n      // Ensure response is defined\n      if (!response) {\n        throw new Error('No response received from server');\n      }\n\n      // Handle HTTP errors\n      if (response.status >= 400) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      // Handle standardized backend response structure\n      if (response.data) {\n        const {\n          success,\n          data,\n          message,\n          error\n        } = response.data;\n        if (success === true) {\n          // Validate required fields if specified\n          if (requiredFields.length > 0) {\n            const validationResult = validateResponse(data, requiredFields, fallbackMessage);\n            if (validationResult && validationResult.success) {\n              return {\n                success: true,\n                data: data,\n                error: null\n              };\n            } else {\n              return validationResult || {\n                success: false,\n                data: null,\n                error: fallbackMessage\n              };\n            }\n          }\n          return {\n            success: true,\n            data: data,\n            error: null\n          };\n        } else {\n          return {\n            success: false,\n            data: null,\n            error: error || message || fallbackMessage\n          };\n        }\n      }\n\n      // Fallback for non-standardized responses\n      return {\n        success: true,\n        data: response,\n        error: null\n      };\n    } catch (error) {\n      var _error$response8;\n      lastError = error;\n\n      // Handle 401 errors with retry logic\n      if (((_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : _error$response8.status) === 401 && retryOn401 && attempt < maxRetries) {\n        console.log(`Retrying API call after 401 error (attempt ${attempt + 1}/${maxRetries})...`);\n        await new Promise(resolve => setTimeout(resolve, retryDelay));\n        continue;\n      }\n\n      // Handle network errors with retry logic\n      if ((error.code === 'NETWORK_ERROR' || error.message === 'Network Error') && attempt < maxRetries) {\n        console.log(`Retrying API call after network error (attempt ${attempt + 1}/${maxRetries})...`);\n        await new Promise(resolve => setTimeout(resolve, retryDelay));\n        continue;\n      }\n\n      // For other errors or max retries reached, break\n      break;\n    }\n  }\n\n  // All retries exhausted or non-retryable error\n  const errorMessage = handleApiError(lastError, fallbackMessage);\n  console.error('API call failed after all retries:', lastError);\n  return {\n    success: false,\n    data: null,\n    error: errorMessage\n  };\n};","map":{"version":3,"names":["getErrorMessage","error","fallbackMessage","_error$response","_error$response2","_error$response3","_error$response4","_error$response5","response","data","detail","errors","Array","isArray","join","message","code","status","validateResponse","requiredFields","success","isValid","every","field","fieldPath","split","current","key","undefined","safeResponseHandler","errorMessage","validationResult","console","safeApiCall","apiCall","safeApiCallWithValidation","fallbackResult","robustApiCall","options","showToast","retryOn401","maxRetries","retryCount","attemptCall","Error","statusText","length","_error$response6","log","Promise","resolve","setTimeout","handleApiError","_error$response7","safeGet","obj","path","defaultValue","keys","resilientApiCall","retryDelay","lastError","attempt","_error$response8"],"sources":["D:/ai_avatar/frontend/src/utils/errorHandler.js"],"sourcesContent":["/**\n * Utility functions for consistent error handling across the application\n */\n\n/**\n * Safely extracts error message from various error response formats\n * @param {Error} error - The error object from try/catch\n * @param {string} fallbackMessage - Default message if no error details found\n * @returns {string} - Safe error message to display to user\n */\n/**\n * Utility functions for consistent error handling across the application\n */\n\n// Extract error message safely\n\n\n\n\nexport const getErrorMessage = (error, fallbackMessage = 'An unexpected error occurred') => {\n  if (!error) return fallbackMessage;\n\n  // Handle Axios error responses\n  if (error.response?.data) {\n    const data = error.response.data;\n    if (data.detail) return data.detail;\n    if (data.error) return data.error;\n    if (data.errors && Array.isArray(data.errors)) {\n      return data.errors.join(', ');\n    }\n    if (data.message) return data.message;\n  }\n\n  // Handle network errors\n  if (error.code === 'NETWORK_ERROR' || error.message === 'Network Error') {\n    return 'Network connection failed. Please check your internet connection.';\n  }\n\n  // Handle timeout errors\n  if (error.code === 'ECONNABORTED') {\n    return 'Request timeout. Please try again.';\n  }\n\n  // Handle JWT/authentication errors\n  if (error.response?.status === 401) {\n    return 'Session expired. Please log in again.';\n  }\n\n  if (error.response?.status === 403) {\n    return 'Access denied. You do not have permission to perform this action.';\n  }\n\n  if (error.response?.status === 404) {\n    return 'Resource not found. Please check the URL and try again.';\n  }\n\n  if (error.response?.status >= 500) {\n    return 'Server error. Please try again later.';\n  }\n\n  // Handle other error types\n  if (error.message) return error.message;\n  if (error.error) return error.error;\n\n  return fallbackMessage;\n};\n\n// Validate required fields inside response\nexport const validateResponse = (response, requiredFields = [], fallbackMessage = 'Invalid response from server') => {\n  if (!response || typeof response !== 'object') {\n    return { success: false, data: null, error: fallbackMessage };\n  }\n\n  const isValid = requiredFields.every(field => {\n    const fieldPath = field.split('.');\n    let current = response;\n\n    for (const key of fieldPath) {\n      if (current && typeof current === 'object' && key in current) {\n        current = current[key];\n      } else {\n        return false;\n      }\n    }\n    return current !== null && current !== undefined;\n  });\n\n  if (isValid) {\n    return { success: true, data: response, error: null };\n  } else {\n    return { success: false, data: null, error: fallbackMessage };\n  }\n};\n\n// Handle raw responses safely\nexport const safeResponseHandler = (response, requiredFields = [], errorMessage = 'Invalid response from server') => {\n  const validationResult = validateResponse(response, requiredFields, errorMessage);\n  if (validationResult && validationResult.success) {\n    return validationResult;\n  } else {\n    console.error('Response validation failed:', response);\n    return validationResult || { success: false, data: null, error: errorMessage };\n  }\n};\n\n// API call wrapper without validation\nexport const safeApiCall = async (apiCall, fallbackMessage = 'API call failed') => {\n  try {\n    const response = await apiCall();\n\n    // Ensure response is defined\n    if (!response) {\n      console.error('No response received from API call');\n      return { success: false, data: null, error: 'No response received from server' };\n    }\n\n    // Handle standardized backend response structure\n    if (response.data) {\n      const { success, data, message, error } = response.data;\n      \n      if (success === true) {\n        return { success: true, data: data, error: null };\n      } else {\n        return { success: false, data: null, error: error || message || fallbackMessage };\n      }\n    }\n    \n    // Fallback for non-standardized responses (assume success)\n    return { success: true, data: response, error: null };\n  } catch (error) {\n    const errorMessage = getErrorMessage(error, fallbackMessage);\n    console.error('API call failed:', error);\n    return { success: false, data: null, error: errorMessage };\n  }\n};\n\n// API call wrapper WITH validation\nexport const safeApiCallWithValidation = async (apiCall, requiredFields = [], fallbackMessage = 'Request failed') => {\n  try {\n    const response = await apiCall();\n\n    // Ensure response is defined\n    if (!response) {\n      console.error('No response received from API call');\n      return { success: false, data: null, error: 'No response received from server' };\n    }\n\n    // Handle standardized backend response structure\n    if (response.data) {\n      const { success, data, message, error } = response.data;\n      \n      if (success === true) {\n        // Validate required fields in the data\n        if (data && typeof data === 'object') {\n          const validationResult = validateResponse(data, requiredFields, fallbackMessage);\n          if (validationResult && validationResult.success) {\n            return { success: true, data: data, error: null };\n          } else {\n            return validationResult || { success: false, data: null, error: fallbackMessage };\n          }\n        } else {\n          return { success: false, data: null, error: 'Invalid data structure received from server' };\n        }\n      } else {\n        return { success: false, data: null, error: error || message || fallbackMessage };\n      }\n    }\n    \n    // Fallback for non-standardized responses\n    const fallbackResult = safeResponseHandler(response, requiredFields, fallbackMessage);\n    return fallbackResult || { success: false, data: null, error: fallbackMessage };\n  } catch (error) {\n    const errorMessage = getErrorMessage(error, fallbackMessage);\n    console.error('API call failed:', error);\n    return { success: false, data: null, error: errorMessage };\n  }\n};\n\n// Enhanced API call wrapper with comprehensive error handling\nexport const robustApiCall = async (apiCall, options = {}) => {\n  const {\n    requiredFields = [],\n    fallbackMessage = 'Request failed',\n    showToast = true,\n    retryOn401 = true,\n    maxRetries = 1\n  } = options;\n\n  let retryCount = 0;\n  \n  const attemptCall = async () => {\n    try {\n      const response = await apiCall();\n      \n      // Handle HTTP errors\n      if (response && response.status >= 400) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      // Handle standardized backend response structure\n      if (response && response.data) {\n        const { success, data, message, error } = response.data;\n        \n        if (success === true) {\n          // Validate required fields if specified\n          if (requiredFields.length > 0) {\n            const validationResult = validateResponse(data, requiredFields, fallbackMessage);\n            if (validationResult && validationResult.success) {\n              return { success: true, data: data, error: null };\n            } else {\n              return validationResult || { success: false, data: null, error: fallbackMessage };\n            }\n          }\n          return { success: true, data: data, error: null };\n        } else {\n          return { success: false, data: null, error: error || message || fallbackMessage };\n        }\n      }\n      \n      // Fallback for non-standardized responses\n      return { success: true, data: response, error: null };\n    } catch (error) {\n      // Handle 401 errors with retry logic\n      if (error.response?.status === 401 && retryOn401 && retryCount < maxRetries) {\n        retryCount++;\n        console.log(`Retrying API call (attempt ${retryCount})...`);\n        // Wait a bit before retry\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        return attemptCall();\n      }\n      \n      const errorMessage = getErrorMessage(error, fallbackMessage);\n      console.error('API call failed:', error);\n      return { success: false, data: null, error: errorMessage };\n    }\n  };\n\n  return attemptCall();\n};\n\n// Comprehensive error handler for all API calls\nexport const handleApiError = (error, fallbackMessage = 'An unexpected error occurred') => {\n  console.error('API Error Details:', error);\n  \n  // Handle different error types\n  if (error?.response?.data) {\n    const data = error.response.data;\n    return data.detail || data.error || data.message || fallbackMessage;\n  }\n  \n  if (error?.message) {\n    return error.message;\n  }\n  \n  if (error?.code === 'NETWORK_ERROR' || error?.message === 'Network Error') {\n    return 'Network connection failed. Please check your internet connection.';\n  }\n  \n  if (error?.code === 'ECONNABORTED') {\n    return 'Request timeout. Please try again.';\n  }\n  \n  return fallbackMessage;\n};\n\n// Safe property access utility\nexport const safeGet = (obj, path, defaultValue = null) => {\n  if (!obj || typeof obj !== 'object') return defaultValue;\n  \n  const keys = path.split('.');\n  let current = obj;\n  \n  for (const key of keys) {\n    if (current && typeof current === 'object' && key in current) {\n      current = current[key];\n    } else {\n      return defaultValue;\n    }\n  }\n  \n  return current !== undefined ? current : defaultValue;\n};\n\n// Enhanced API call with comprehensive error handling and retry logic\nexport const resilientApiCall = async (apiCall, options = {}) => {\n  const {\n    requiredFields = [],\n    fallbackMessage = 'Request failed',\n    maxRetries = 2,\n    retryDelay = 1000,\n    retryOn401 = true\n  } = options;\n\n  let lastError = null;\n  \n  for (let attempt = 0; attempt <= maxRetries; attempt++) {\n    try {\n      const response = await apiCall();\n      \n      // Ensure response is defined\n      if (!response) {\n        throw new Error('No response received from server');\n      }\n      \n      // Handle HTTP errors\n      if (response.status >= 400) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      \n      // Handle standardized backend response structure\n      if (response.data) {\n        const { success, data, message, error } = response.data;\n        \n        if (success === true) {\n          // Validate required fields if specified\n          if (requiredFields.length > 0) {\n            const validationResult = validateResponse(data, requiredFields, fallbackMessage);\n            if (validationResult && validationResult.success) {\n              return { success: true, data: data, error: null };\n            } else {\n              return validationResult || { success: false, data: null, error: fallbackMessage };\n            }\n          }\n          return { success: true, data: data, error: null };\n        } else {\n          return { success: false, data: null, error: error || message || fallbackMessage };\n        }\n      }\n      \n      // Fallback for non-standardized responses\n      return { success: true, data: response, error: null };\n      \n    } catch (error) {\n      lastError = error;\n      \n      // Handle 401 errors with retry logic\n      if (error.response?.status === 401 && retryOn401 && attempt < maxRetries) {\n        console.log(`Retrying API call after 401 error (attempt ${attempt + 1}/${maxRetries})...`);\n        await new Promise(resolve => setTimeout(resolve, retryDelay));\n        continue;\n      }\n      \n      // Handle network errors with retry logic\n      if ((error.code === 'NETWORK_ERROR' || error.message === 'Network Error') && attempt < maxRetries) {\n        console.log(`Retrying API call after network error (attempt ${attempt + 1}/${maxRetries})...`);\n        await new Promise(resolve => setTimeout(resolve, retryDelay));\n        continue;\n      }\n      \n      // For other errors or max retries reached, break\n      break;\n    }\n  }\n  \n  // All retries exhausted or non-retryable error\n  const errorMessage = handleApiError(lastError, fallbackMessage);\n  console.error('API call failed after all retries:', lastError);\n  return { success: false, data: null, error: errorMessage };\n};\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}