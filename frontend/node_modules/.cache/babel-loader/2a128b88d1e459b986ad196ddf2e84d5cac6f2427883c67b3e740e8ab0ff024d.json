{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000/api';\n\n// Create a separate axios instance for public endpoints that don't require authentication\nconst publicApi = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor for public API calls\npublicApi.interceptors.request.use(config => {\n  // Don't set Content-Type for FormData - let browser set it with boundary\n  if (config.data instanceof FormData) {\n    delete config.headers['Content-Type'];\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor to handle errors\npublicApi.interceptors.response.use(response => {\n  // Log successful responses for debugging\n  console.log('Public API Response:', response.status, response.config.url);\n  return response;\n}, async error => {\n  var _error$response, _error$response2, _error$response3, _error$config4;\n  // Handle error responses\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 404) {\n    var _error$config;\n    console.log('Resource not found:', (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url);\n  } else if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) >= 500) {\n    var _error$config2;\n    console.log('Server error:', (_error$config2 = error.config) === null || _error$config2 === void 0 ? void 0 : _error$config2.url);\n  } else if (error.code === 'NETWORK_ERROR' || error.message === 'Network Error') {\n    var _error$config3;\n    console.log('Network error:', (_error$config3 = error.config) === null || _error$config3 === void 0 ? void 0 : _error$config3.url);\n  }\n\n  // Log error for debugging\n  console.error('Public API Error:', (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status, (_error$config4 = error.config) === null || _error$config4 === void 0 ? void 0 : _error$config4.url, error.message);\n  return Promise.reject(error);\n});\nexport default publicApi;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","publicApi","create","baseURL","headers","interceptors","request","use","config","data","FormData","error","Promise","reject","response","console","log","status","url","_error$response","_error$response2","_error$response3","_error$config4","_error$config","_error$config2","code","message","_error$config3"],"sources":["D:/ai_avatar/frontend/src/services/publicApi.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000/api';\r\n\r\n// Create a separate axios instance for public endpoints that don't require authentication\r\nconst publicApi = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor for public API calls\r\npublicApi.interceptors.request.use(\r\n  (config) => {\r\n    // Don't set Content-Type for FormData - let browser set it with boundary\r\n    if (config.data instanceof FormData) {\r\n      delete config.headers['Content-Type'];\r\n    }\r\n    \r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor to handle errors\r\npublicApi.interceptors.response.use(\r\n  (response) => {\r\n    // Log successful responses for debugging\r\n    console.log('Public API Response:', response.status, response.config.url);\r\n    return response;\r\n  },\r\n  async (error) => {\r\n    // Handle error responses\r\n    if (error.response?.status === 404) {\r\n      console.log('Resource not found:', error.config?.url);\r\n    } else if (error.response?.status >= 500) {\r\n      console.log('Server error:', error.config?.url);\r\n    } else if (error.code === 'NETWORK_ERROR' || error.message === 'Network Error') {\r\n      console.log('Network error:', error.config?.url);\r\n    }\r\n    \r\n    // Log error for debugging\r\n    console.error('Public API Error:', error.response?.status, error.config?.url, error.message);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default publicApi;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;;AAEjF;AACA,MAAMC,SAAS,GAAGL,KAAK,CAACM,MAAM,CAAC;EAC7BC,OAAO,EAAEN,YAAY;EACrBO,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;;AAEF;AACAH,SAAS,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAC/BC,MAAM,IAAK;EACV;EACA,IAAIA,MAAM,CAACC,IAAI,YAAYC,QAAQ,EAAE;IACnC,OAAOF,MAAM,CAACJ,OAAO,CAAC,cAAc,CAAC;EACvC;EAEA,OAAOI,MAAM;AACf,CAAC,EACAG,KAAK,IAAK;EACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAV,SAAS,CAACI,YAAY,CAACS,QAAQ,CAACP,GAAG,CAChCO,QAAQ,IAAK;EACZ;EACAC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEF,QAAQ,CAACG,MAAM,EAAEH,QAAQ,CAACN,MAAM,CAACU,GAAG,CAAC;EACzE,OAAOJ,QAAQ;AACjB,CAAC,EACD,MAAOH,KAAK,IAAK;EAAA,IAAAQ,eAAA,EAAAC,gBAAA,EAAAC,gBAAA,EAAAC,cAAA;EACf;EACA,IAAI,EAAAH,eAAA,GAAAR,KAAK,CAACG,QAAQ,cAAAK,eAAA,uBAAdA,eAAA,CAAgBF,MAAM,MAAK,GAAG,EAAE;IAAA,IAAAM,aAAA;IAClCR,OAAO,CAACC,GAAG,CAAC,qBAAqB,GAAAO,aAAA,GAAEZ,KAAK,CAACH,MAAM,cAAAe,aAAA,uBAAZA,aAAA,CAAcL,GAAG,CAAC;EACvD,CAAC,MAAM,IAAI,EAAAE,gBAAA,GAAAT,KAAK,CAACG,QAAQ,cAAAM,gBAAA,uBAAdA,gBAAA,CAAgBH,MAAM,KAAI,GAAG,EAAE;IAAA,IAAAO,cAAA;IACxCT,OAAO,CAACC,GAAG,CAAC,eAAe,GAAAQ,cAAA,GAAEb,KAAK,CAACH,MAAM,cAAAgB,cAAA,uBAAZA,cAAA,CAAcN,GAAG,CAAC;EACjD,CAAC,MAAM,IAAIP,KAAK,CAACc,IAAI,KAAK,eAAe,IAAId,KAAK,CAACe,OAAO,KAAK,eAAe,EAAE;IAAA,IAAAC,cAAA;IAC9EZ,OAAO,CAACC,GAAG,CAAC,gBAAgB,GAAAW,cAAA,GAAEhB,KAAK,CAACH,MAAM,cAAAmB,cAAA,uBAAZA,cAAA,CAAcT,GAAG,CAAC;EAClD;;EAEA;EACAH,OAAO,CAACJ,KAAK,CAAC,mBAAmB,GAAAU,gBAAA,GAAEV,KAAK,CAACG,QAAQ,cAAAO,gBAAA,uBAAdA,gBAAA,CAAgBJ,MAAM,GAAAK,cAAA,GAAEX,KAAK,CAACH,MAAM,cAAAc,cAAA,uBAAZA,cAAA,CAAcJ,GAAG,EAAEP,KAAK,CAACe,OAAO,CAAC;EAC5F,OAAOd,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAeV,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}